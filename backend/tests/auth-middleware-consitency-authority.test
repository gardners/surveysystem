@description rejects requests for an existing session if authority has changed
@useproxy!

#!------- Rather than the backend this test tests if lighttpd in our test environment has been configured correctly.

# Create a dummy survey
definesurvey changed_ip
version 2
Silly test survey updated
without python
question1:Question 1::TEXT:0::-1:-1:0:0::
question2:Question 2::TEXT:0::-1:-1:0:0::
endofsurvey

# simultating existing session with different @authority ip address
definesession 18530e05-0000-0000-7288-7d0d602be5b6
changed_ip/current
@user:META:user1:0:0:0:0:0:0:0::0:<UTIME>
@group:META:group1:0:0:0:0:0:0:0::0:<UTIME>
@authority:META:127.0.0.99(8099):<IDENDITY_HTTP_TRUSTED>:0:0:0:0:0:0::0:<UTIME>
@closed:META::0:0:0:0:0:0:0::0:<UTIME>
question1:TEXT:ANSWER 1:0:0:0:0:0:0:0::0:<UTIME>
endofsession

#!------- endpoint /nextquestion
request proxy 407 nextquestion?sessionid=$SESSION curlargs(--user test:1234 -H "X-SurveyProxy-Auth-User: user1" -H "X-SurveyProxy-Auth-Group: group1")


